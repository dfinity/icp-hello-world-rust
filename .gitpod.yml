tasks:
    - before: |
        npm install &
        export PATH="$HOME/bin:$PATH"
        echo 'export PATH="$HOME/bin:$PATH"' >> ~/.bashrc
        sudo apt-get install -q -y libunwind-dev
        curl -sLO https://download.dfinity.systems/ic/69e1408347723dbaa7a6cd2faa9b65c42abbe861/openssl-static-binaries/x86_64-linux/pocket-ic.gz
        gzip -d pocket-ic.gz
        chmod +x pocket-ic
        mv pocket-ic ./src/icp_hello_world_rust_backend
        sh -ci "$(curl -fsSL https://internetcomputer.org/install.sh)"
        dfx start --background --clean
      command: |
        npm start

vscode:
  extensions:
    - dfinity-foundation.vscode-motoko
    - tamasfe.even-better-toml
    - rust-lang.rust-analyzer

ports:
  - name: Replica
    port: 4943
    visibility: public
    onOpen: ignore
  - name: Dev Server
    port: 3000
    visibility: public
    onOpen: open-browser
